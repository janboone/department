#+TITLE: Health Care Expenditures
#+AUTHOR: Jan Boone, Minke Remmerswaal, and Bram Wouterse
#+OPTIONS: reveal_center:t reveal_progress:t reveal_history:nil reveal_control:t
#+OPTIONS: reveal_mathjax:t reveal_rolling_links:t reveal_keyboard:t reveal_overview:t num:nil
#+OPTIONS: reveal_width:1200 reveal_height:800
#+OPTIONS: toc:1 timestamp:nil
#+REVEAL_MARGIN: 0.1
#+REVEAL_MIN_SCALE: 0.5
#+REVEAL_MAX_SCALE: 2.5
#+REVEAL_TRANS: cube
#+REVEAL_THEME: sky
#+REVEAL_HLEVEL: 1
#+LANGUAGE:  en



* Introduction

** Introduction

+ objective of this project:
  + calculate effects of different sizes and types of cost-sharing on healthcare spending
+ problem is: after the reform, the Netherlands has only featured deductible (like) cost sharing
+ empirical literature too specific 
+ theoretical models hard to estimate
+ our aim is to develop a model which solves both points

** Why Bayesian?

+ only a deductible and similar types of cost-sharing in the Netherlands
+ how can we generalize to e.g. a "donut"
+ cost distributions important for other types of cost-sharing

#+attr_latex: :width 500px
[[./ExpenditureOverAge.png]]

* Model

** Total healthcare expenditure in a year
+ $H(z)$: distribution of healthcare expenditure in a year
  + where $z=x+y$
  + $x$: exogenous, not affected by cost-sharing, high-value care
  + $y$: endogenous, affected by cost-sharing
 
** Idea of the model
+ "at the start of the year", person $i$ is offered one treatment with value $v_y$ and expected out-of-pocket cost OOP
+ $i$ accepts if $v_y$ exceeds expected OOP
+ OOP depends on:
  + $f(x)$ exogenous ex-ante distribution of healthcare expenditure
  + $g(y)$ endogenous cost distribution of offered treatment
  + cost-sharing 
+ for a deductible $D$ OOP equals $\int_0^{+\infty} \int_0^{+\infty} (d(x+y|D)-d(x|D))f(x)g(y)dxdy$
 
* Estimation

** Parametric specification
+ "everybody knows" that healthcare expenditures are log-normally distributed:
  + positive healthcare costs are transformed into logs, which are normally distributed
  + we model the propability on zero healthcare costs
  + two computational benefits:
    + analytical expression for OOP with deductible
    + analytical expression for distribution of $x+y$

** Example

#+name: fig:TwoDistributions
#+caption: Two illustrative distributions for positive healthcare costs
[[./DistributionExpenditure.png]]


** Four components
+ we define 38*2 categories based on age and gender
+ within each category we have a /distribution/ of (log) healthcare costs $z$
+ we model these distributions as the mixture of 4 components where:
  + $x$ is normally distributed with $\mu_x,\sigma_x$ determined by age and year fixed effects (both per gender), 
  + the same applies for $y$
  + $\psi$ is the probability that agents gets offered a treatment $x > 0$: age fixed effects by gender (and a year fixed effect for 21+ women) 
  + $\phi$ is the same, for $y > 0$.
+ with $x,y,\psi$ and the deductible, we calculate the OOP for $y$ per age, gender, year
+ then we compute probability $F$ that $y$ is rejected ($v_y <$ OOP)
+ where $v_y$ is normally distributed with $\mu,\sigma$ that vary by age and gender
+ distribution for $z$ is a mixture of 4 components:


** Probabilities

|---------+-----------------------------|
|         | probability                 |
|---------+-----------------------------|
| $x=y=0$ | $(1-\psi)(1-\phi + \phi F)$ |
| $x>0=y$ | $\psi*(1-\phi + \phi F)$    |
| $y>0=x$ | $(1-\psi)\phi(1-F)$         |
| $x,y>0$ | $\psi \phi (1-F)$           |


** Technique

+ we specify priors for our parameters
  + we have 5,000,000 observations per year
  + on average 65,000 observations per category per year
+ estimation with variational inference (ADVI, Auto-diff Variational Inference) and minibatches
  + standard Markov Chain Monte Carlo methods (Metropolis, NUTS etc.) do not scale well with data size
+ python and pymc3

* Fit

** How to measure fit

+ it is not obvious how to measure the fit of the model
+ we can compare average expenditure per age-gender category (fit vs observed)
+ we can compare distributions via QQ plots
+ we can compare predicted vs realized zero-expenditures per category (but what is "zero"?)

** Fit on average costs by age, year and sex

#+REVEAL_HTML: <iframe width="840" height="300" src="./fit_across_ages_logs.html" frameborder="0" allowfullscreen></iframe>

** QQ plot for 30 year old woman in 2013

#+attr_latex: :width 500px
[[./qq_female_age30_2013.png]]

* Simulations

** Simulation for deductible levels

#+REVEAL_HTML: <iframe width="840" height="300" src="./sim_deductibles_logs.html.html" frameborder="0" allowfullscreen></iframe>

+ add summary statistics (moral hazard reduction is XX euros/pp, average OOP is XX euros/pp)

** Simulation for 25% co-insurance rate with caps

#+REVEAL_HTML: <iframe width="840" height="300" src="./sim_25p_deductibles_logs.html" frameborder="0" allowfullscreen></iframe>

+ add summary statistics (moral hazard reduction is XX euros/pp, average OOP is XX euros/pp)

** Comparison deductibles and 25% co-insurance rate

#+REVEAL_HTML: <iframe width="840" height="300" src="./sim_logdeductible_25p_averaged_age_logs.html" frameborder="0" allowfullscreen></iframe>



* What's next? 
